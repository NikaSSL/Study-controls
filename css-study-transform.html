<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>CSS3——学习transform</title>
	<script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
	<style type="text/css">
		*{margin: 0;padding: 0;}
		main{
			margin: 0 auto;
			width: 100%;
			margin-top: 100px;
			text-align: right;
		}
		#box{
			position: relative;
			width: 65%;
			height: 600px;
			float: left;
		}
		#test{
			position: absolute;
			background-color: red;
			width: 200px;
			height: 100px;
			left: 100px;
			top: 100px;
		}
		label{display: block;}
		#bar{
			right: 10px;
			top: 0;
			margin: 0 auto;
			width: 34%;
			float: left;
			border-left: 1px solid red;
		}
	</style>
</head>
<body>
	<main>
		<div id="box">
			<div id="test"></div>			
		</div>
		<div id="bar">
			<!-- transform-origin 变换中心 -->
			<label for="transformOriginXB">
				transform-origin的x-axis(0%至100%):<span id="transform-OXV">0</span>
				<input unit="%"  type="range" id="transformOriginXB" min="0" max="100" value="0">
			</label>
			<label for="transformOriginYB">
				transform-origin的y-axis(0%至100%):<span id="transform-OYV">0</span>
				<input unit="%"  type="range" id="transformOriginYB" min="0" max="100" value="0">
			</label>
<!-- 			<label for="transformOriginZB">
				transform-origin的z-axis(0%至100%):<span id="transform-OZV">0</span>
				<input  type="range" id="transformOriginZB" min="0" max="100" value="0">
			</label> -->
			<!-- translate 移动 -->
			<label for="translateXB">
				translateX(范围-100至100):<span id="translateXV">0</span>
				<input unit="px" type="range" id="translateXB" min="-100" max="100" value="0">
			</label>
			<label for="translateYB">
				translateY(范围-200至200):<span id="translateYV">0</span>
				<input unit="px" type="range" id="translateYB" min="-200" max="200" value="0">			
			</label>		
			<!-- rotate 旋转 -->						
			<label for="rotateB">
				rotate(范围-360deg至360deg):<span id="rotateV">0</span>	
				<input unit="deg" type="range" id="rotateB" min="-360" max="360" value="0">	
			</label>
			<!-- scale 缩放 -->
			<label for="scaleXB">
				scaleX(范围0到2):<span id="scaleXV">1</span>
				<input unit="" type="range" id="scaleXB" min="0" max="2" value="1">
			</label>
			<label for="scaleYB">
				scaleY(范围0到2):<span id="scaleYV">1</span>
				<input unit="" type="range" id="scaleYB" min="0" max="2" value="1">
			</label>
			<!-- skew 扭曲	 -->
			<label for="skewXB">
				skewX(范围-180deg到180deg):<span id="skewXV">0</span>
				<input unit="deg" type="range" id="skewXB" min="-180" max="180deg" value="0">
			</label>
			<label for="skewYB">
				skewY(范围-180deg到180deg):<span id="skewYV">0</span>
				<input unit="deg" type="range" id="skewYB" min="-180" max="180deg" value="0">
			</label>				
		</div>		
	</main>
<script type="text/javascript">
	$(function(){
		var transformOrigin = ['50%','50%'];
		var foo = {
			"translateX": "0px",
			"translateY": "0px",
			"rotate": "0deg",
			"scaleX": "1",
			"scaleY": "1",
			"skewX": "0deg",
			"skewY": "0deg"
		};
		$('input[type=range]').change(function(){
			var id = $(this).attr("id");
			var ID = id.substring(0,id.length-1);//去除尾部的字母B
			var o,arr;
			if(ID.indexOf('transformOrigin') == -1){
				foo[ID] = $(this).val() + $(this).attr('unit');
			}else{//当改变的是transform-origin的参数
				if (ID.indexOf('X') != -1) {
					transformOrigin[0] = $(this).val() + $(this).attr('unit');
				}else{
					transformOrigin[1] = $(this).val() + $(this).attr('unit');
				}				
				$('#test').css('transformOrigin',transformOrigin.join(' '));
			}
			var str = JSON.stringify(foo);
			var arr2 = str.substring(1,str.length-1).split(',');
			var  i,arr3,arr4 = '';
			for(i in arr2){
				arr2[i] = arr2[i].replace('/"/g','');//去除双引号[RegExp书写存在问题，希望达到的效果：去除所有双引号]
				arr3 = arr2[i].split(':');
				arr3[1] = '(' + arr3[1] + ')';
				arr4 = (i == arr2.length-1) ? arr4 + arr3.join(':'):arr4 + arr3.join(':') + ' ';
			}
			console.log(arr4);
			$('#test').css('transform',arr4);
		})
	})
</script>
</body>
</html>